// This file is reponsible for seeding the malware signatures table with
// my list of malware packges.
require('dotenv').config();
const db = require("./models");

const malwarePackages = [
  'com.example.testmalware', // This is my testing malware package name
];

async function seedMalware() {
  // This makes sure the database is ready and seeds the malware table
  // with the signature of my malware testing app.
  try {
    await db.sequelize.sync();
    await Promise.all(
      malwarePackages.map(pkg => // malware package names are taken 
        db.malware.findOrCreate({ where: { packageName: pkg } })
      )
    );
    console.log("Malware signatures have been seeded!");
    process.exit(0);
  } catch (err) {
    // Otherwise, error message is displayed.
    console.error("Error seeding malware signatures:", err);
    process.exit(1);
  }
}
seedMalware();